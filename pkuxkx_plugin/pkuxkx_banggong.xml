<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE muclient>
<!-- Saved on Saturday, May 21, 2016, 10:22 PM -->
<!-- MuClient version 5.01 -->

<!-- Plugin "pkuxkx_banggong" generated by Plugin Wizard -->

<muclient>
<plugin
   name="pkuxkx_banggong"
   author="非常道"
   id="63be6d1d4f4762667a7ffc60"
   language="Lua"
   purpose="北侠帮贡"
   save_state="y"
   date_written="2016-05-21 22:19:52"
   requires="4.94"
   version="1.0"
   >
<description trim="y">
<![CDATA[
到地方bhfind
]]>
</description>

</plugin>


<!--  Triggers  -->

<triggers>
  <trigger
   enabled="y"
   group="帮贡"
   match="看你手忙脚乱的！不用这么着急的。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>DoAfterSpecial(1,"pick",10)</send>
  </trigger>
  <trigger
   enabled="y"
   group="帮贡"
   match="你收回了你的视线，放弃对细节的搜寻。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>--AddAlias("group","pick","bhmove north",1+1024,"")
SetVariable("lon",0)
SetVariable("lat",0)
SetVariable("line",0)
SetVariable("aimlat",0)
SetVariable("aimlon",0)</send>
  </trigger>
  <trigger
   enabled="y"
   group="帮贡"
   match="^[&gt; ]*你今天已经为.*做出足够多的贡献了。$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>--EnableGroup("帮贡", 0)
Execute("close_fullme")</send>
  </trigger>
  <trigger
   enabled="y"
   group="帮贡"
   keep_evaluating="y"
   match="^(\S*|)♀(\S*|)$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("lat",(GetVariable("line")))
long = string.find("%0", "♀")</send>
  </trigger>
  <trigger
   enabled="y"
   group="帮贡"
   keep_evaluating="y"
   match="^(\S*|)★(\S*|)$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("aimlat",(GetVariable("line")))
target_long = string.find("%0", "★")</send>
  </trigger>
  <trigger
   enabled="y"
   group="帮贡"
   keep_evaluating="y"
   match="你向*继续搜寻"
   send_to="12"
   sequence="100"
  >
  <send>banggong_direction = ""</send>
  </trigger>
  <trigger
   enabled="y"
   group="帮贡"
   match="你发现了.*份帮派资材，并运送回了.*"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>--AddAlias("group","pick","bhmove south",1+1024,"")
SetVariable("lon",0)
SetVariable("lat",0)
SetVariable("line",0)
SetVariable("aimlat",0)
SetVariable("aimlon",0)
Execute("bhread;gquery -me")</send>
  </trigger>
  <trigger
   enabled="y"
   expand_variables="y"
   group="帮贡"
   match="^[&gt; ]*设定环境变量：no\_more \= \&quot;walkend\&quot;$"
   omit_from_output="y"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>banggong_direction = ""
Send("bhfind")</send>
  </trigger>
  <trigger
   enabled="y"
   group="帮贡"
   keep_evaluating="y"
   match="♀(\S*|)★"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>--AddAlias("group","pick","move east",1+1024,"")
banggong_direction = "east"
SetVariable("lon",0)
SetVariable("lat",0)
SetVariable("line",0)
SetVariable("aimlat",0)
SetVariable("aimlon",0)</send>
  </trigger>
  <trigger
   enabled="y"
   group="帮贡"
   keep_evaluating="y"
   match="★(\S*|)♀"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>--AddAlias("group","pick","move west",1+1024,"")
banggong_direction = "west"
SetVariable("lon",0)
SetVariable("lat",0)
SetVariable("line",0)
SetVariable("aimlat",0)
SetVariable("aimlon",0)</send>
  </trigger>
  <trigger
   enabled="y"
   group="帮贡"
   keep_evaluating="y"
   match="^♀(\S*|)$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("line",(GetVariable("line")+1))</send>
  </trigger>
  <trigger
   enabled="y"
   group="帮贡"
   keep_evaluating="y"
   match="^★\S*$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("line",(GetVariable("line")+1))</send>
  </trigger>
  <trigger
   custom_colour="2"
   enabled="y"
   group="帮贡"
   match="^★―资材所在位置  ♀―自身所在位置"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>if long &lt; target_long then
  banggong_direction = "east"
elseif long &gt; target_long then
  banggong_direction = "west"
else banggong_direction = ""
end
if GetVariable("lat")*1&lt;GetVariable("aimlat")*1 then
  banggong_direction = "south"..banggong_direction
elseif GetVariable("lat")*1&gt;GetVariable("aimlat")*1 then
  banggong_direction = "north"..banggong_direction
end
--print(banggong_direction)
DeleteAlias("group")
AddAlias("group","bhpick","bhmove "..banggong_direction,1+1024,"")
banggong_direction = ""
DoAfterSpecial(2,"bhpick",10)</send>
  </trigger>
  <trigger
   enabled="y"
   group="帮贡"
   keep_evaluating="y"
   match="^\S+$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("line",(GetVariable("line")+1))</send>
  </trigger>
  <trigger
   enabled="y"
   group="帮贡"
   match="你还没有找到帮派资材所在的地方。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("lon",0)
SetVariable("lat",0)
SetVariable("line",0)
SetVariable("aimlat",0)
SetVariable("aimlon",0)</send>
  </trigger>
  <trigger
   enabled="y"
   group="帮贡"
   match="^你现在搜索的位置似乎有些帮派资材，可以用bhgather命令采集。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Execute("bhgather")
</send>
  </trigger>
</triggers>

<!--  Variables  -->

<variables>
  <variable name="lat">0</variable>
  <variable name="line">0</variable>
  <variable name="aimlat">0</variable>
  <variable name="lon">0</variable>
  <variable name="aimlon">0</variable>
</variables>

<!--  Plugin help  -->

<aliases>
  <alias
   script="OnHelp"
   match="pkuxkx_banggong:help"
   enabled="y"
  >
  </alias>
</aliases>

<script>
<![CDATA[
function OnHelp ()
  world.Note (world.GetPluginInfo (world.GetPluginID (), 3))
end
]]>
</script> 

</muclient>
